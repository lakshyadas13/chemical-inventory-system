{% extends "base.html" %}
{% block content %}

<h3>Update Stock â€“ {{ product.name }}</h3>

<form method="POST" class="mt-3">
    <div class="mb-3">
        <label>Quantity</label>
        <input
            type="number"
            step="0.01"
            class="form-control"
            name="quantity"
            required
        >
    </div>

    <div class="mb-3">
        <label>Action</label>
        <select class="form-control" name="action">
            <option value="IN">IN (Add Stock)</option>
            <option value="OUT">OUT (Remove Stock)</option>
        </select>
    </div>

    <button class="btn btn-primary">Update Stock</button>
    <a href="/" class="btn btn-secondary">Cancel</a>
</form>
<hr>

<h5 class="mt-4">Stock Movement History</h5>

{% if movements %}
<table class="table table-sm table-bordered mt-2">
    <thead class="table-light">
        <tr>
            <th>Action</th>
            <th>Quantity</th>
            <th>Date & Time</th>
        </tr>
    </thead>
    <tbody>
        {% for m in movements %}
        <tr>
            <td>
                {% if m.action == "IN" %}
                    <span class="badge bg-success">IN</span>
                {% else %}
                    <span class="badge bg-danger">OUT</span>
                {% endif %}
            </td>
            <td>{{ m.quantity }}</td>
            <td>{{ m.timestamp.strftime("%d %b %Y, %H:%M") }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="text-muted">No stock movements yet.</p>
{% endif %}

{% endblock %}
